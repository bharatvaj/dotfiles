" Use XDG Paths for vim
set runtimepath^='$XDG_CONFIG_HOME/vim'
set runtimepath+='$XDG_DATA_HOME/vim'
set runtimepath+='$XDG_CONFIG_HOME/vim/after'

set packpath^=$XDG_DATA_HOME/vim

let g:netrw_home = $XDG_DATA_HOME . "/vim"
call mkdir($XDG_DATA_HOME . "/vim/spell", 'p')
set viewdir=$XDG_DATA_HOME/vim/view | call mkdir(&viewdir, 'p')

set backupdir=$XDG_CACHE_HOME/vim/backup | call mkdir(&backupdir, 'p')
set directory=$XDG_CACHE_HOME/vim/swap   | call mkdir(&directory, 'p')
set undodir=$XDG_CACHE_HOME/vim/undo     | call mkdir(&undodir,   'p')

if !has('nvim') | set viminfofile=$XDG_CACHE_DIR/vim/viminfo | endif

" Line number
"Adapted from https://jeffkreeftmeijer.com/vim-number/
set number
augroup numbertoggle
  autocmd!
  autocmd BufEnter,FocusGained,InsertLeave,WinEnter * if &nu && mode() != "i" | set rnu   | endif
  autocmd BufLeave,FocusLost,InsertEnter,WinLeave   * if &nu                  | set nornu | endif
augroup END

" General
set mouse=a
set nocursorline
syntax on
set exrc
set scrolloff=8
" Turn backup off
set nobackup
set nowb
set noswapfile

" Map leader to space
nnoremap <SPACE> <Nop>
let mapleader = " "

" Enable hidden buffers
set hidden

" Disable auto fixing end of line
" Useful when opening binary files
set nofixendofline

" Disable vim intro message
set shortmess=Iat

" Search
set hlsearch
set incsearch

" Pro tab
filetype plugin indent on
set tabstop=4
set shiftwidth=4

" Netrw customization
let g:netrw_banner = 0

" Disable status
set laststatus=1

" Keybindings
source $XDG_CONFIG_HOME/vim/keybindings/keybindings.vim

if has("win32")
	if executable("pwsh")
		set shell=pwsh
		set shellcmdflag=-ExecutionPolicy\ RemoteSigned\ -Command
		set shellquote=\" 
		" shellxquote must be a literal space character.
		set shellxquote=  
	endif
endif
